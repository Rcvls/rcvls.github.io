<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>RaceValues Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "Test Edition #1" //Remember to update this before making changes to the test itself!
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>RaceValues</h1>
<hr>

<h1>Results</h1>

<h2>Bigotry Axis: <span class="weight-300" id="bigotry-label"></span></h2>
<div class="axis">
    <img id="img-aggression" src="value_images/aggression.svg" height="128pt"/>
    <div class="bar aggression" id="bar-aggression"><div class="text-wrapper" id="aggression"></div></div>
    <div class="bar courtesy" id="bar-courtesy"><div class="text-wrapper" id="courtesy"></div></div>
    <img id="img-courtesy" src="value_images/courtesy.svg" height="128pt"/>
</div>
<h2>Differentialism Axis: <span class="weight-300" id="differentialism-label"></span></h2>
<div class="axis">
    <img id="img-speciation" src="value_images/speciation.svg" height="128pt"/>
    <div class="bar speciation" id="bar-speciation"><div class="text-wrapper" id="speciation"></div></div>
    <div class="bar uniformity" id="bar-uniformity"><div class="text-wrapper" id="uniformity"></div></div>
    <img id="img-uniformity" src="value_images/uniformity.svg" height="128pt"/>
</div>
<h2>Assimilationism Axis: <span class="weight-300" id="assimilationism-label"></span></h2>
<div class="axis">
    <img id="img-integration" src="value_images/integration.svg" height="128pt"/>
    <div class="bar integration" id="bar-integration"><div class="text-wrapper" id="integration"></div></div>
    <div class="bar segregation" id="bar-segregation"><div class="text-wrapper" id="segregation"></div></div>
    <img id="img-segregation" src="value_images/segregation.svg" height="128pt"/>
</div>
<h2>Pluralism Axis: <span class="weight-300" id="pluralism-label"></span></h2>
<div class="axis">
    <img id="img-diversity" src="value_images/diversity.svg" height="128pt"/>
    <div class="bar diversity" id="bar-diversity"><div class="text-wrapper" id="diversity"></div></div>
    <div class="bar supremacy" id="bar-supremacy"><div class="text-wrapper" id="supremacy"></div></div>
    <img id="img-supremacy" src="value_images/supremacy.svg" height="128pt"/>
</div>
<h2>Politicization Axis: <span class="weight-300" id="politicization-label"></span></h2>
<div class="axis">
    <img id="img-totalitarian" src="value_images/totalitarian.svg" height="128pt"/>
    <div class="bar totalitarian" id="bar-totalitarian"><div class="text-wrapper" id="totalitarian"></div></div>
    <div class="bar libertarian" id="bar-libertarian"><div class="text-wrapper" id="libertarian"></div></div>
    <img id="img-libertarian" src="value_images/libertarian.svg" height="128pt"/>
</div>
<h2>Particularism Axis: <span class="weight-300" id="particularism-label"></span></h2>
<div class="axis">
    <img id="img-particular" src="value_images/particular.svg" height="128pt"/>
    <div class="bar particular" id="bar-particular"><div class="text-wrapper" id="particular"></div></div>
    <div class="bar universal" id="bar-universal"><div class="text-wrapper" id="universal"></div></div>
    <img id="img-universal" src="value_images/universal.svg" height="128pt"/>
</div>

<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<p>Ideological matching is a work in progress, and is much less accurate than the values and axes.</p>
<p>You can send these results by copying and pasting the URL at the top of the page or using the image below. </p>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';">Back</button> <br>


<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    bigtArray = ["Wrathful","Hateful","Prejudiced","Indifferent","Friendly","Trusting","Suicidal Empath"]
    diffArray = ["Polygenist","Race Realist","Nature leaning","Nature and Nurture","Nurture leaning","Nurture over Nature","Blank-Slatist"]
    asimArray = ["Creolization","Pan-Continentalist","Assimilationist","Balanced","Exclusive","Kindred Peoples Only","Essentialist"]
    plurArray = ["Let a Thousand Flowers Bloom","Pluralist","Respectful","Neutral","Disregardful","Imperialist","Exterminationist"]
    plznArray = ["Euthanizations","Sterilizations","Penalties","Incentives","Deductions","Campaigns","Colour Blind"]
    partArray = ["Racial Egoism","Exception Politics","Pragmatist","Moderate","Liberal","Moral Equality","Universal Ethics"]

    function setLabel(val,ary) {
        if (val > 100) { return "" } else
        if (val > 90) { return ary[0] } else
        if (val > 75) { return ary[1] } else
        if (val > 60) { return ary[2] } else
        if (val >= 40) { return ary[3] } else
        if (val >= 25) { return ary[4] } else
        if (val >= 10) { return ary[5] } else
        if (val >= 0) { return ary[6] } else
        	{return ""}
    }

    aggression      = getQueryVariable("bi")
    speciation      = getQueryVariable("di")
    integration     = getQueryVariable("as")
    diversity       = getQueryVariable("pl")
    totalitarian    = getQueryVariable("po")
    particular      = getQueryVariable("pa")
    courtesy        = (100 - aggression).toFixed(1)
    uniformity      = (100 - speciation).toFixed(1)
    segregation     = (100 - integration).toFixed(1)
    supremacy       = (100 - diversity).toFixed(1)
    libertarian     = (100 - totalitarian).toFixed(1)
    universal       = (100 - particular).toFixed(1)

    setBarValue("aggression", aggression)
    setBarValue("courtesy", courtesy)
    setBarValue("speciation", speciation)
    setBarValue("uniformity", uniformity)
    setBarValue("integration", integration)
    setBarValue("segregation", segregation)
    setBarValue("diversity", diversity)
    setBarValue("supremacy", supremacy)
    setBarValue("totalitarian", totalitarian)
    setBarValue("libertarian", libertarian)
    setBarValue("particular", particular)
    setBarValue("universal", universal)

    document.getElementById("bigotry-label").innerHTML = setLabel(aggression, bigtArray)
    document.getElementById("differentialism-label").innerHTML = setLabel(speciation, diffArray)
    document.getElementById("assimilationism-label").innerHTML = setLabel(integration, asimArray)
    document.getElementById("pluralism-label").innerHTML = setLabel(diversity, plurArray)
    document.getElementById("politicization-label").innerHTML = setLabel(totalitarian, plznArray)
    document.getElementById("particularism-label").innerHTML = setLabel(particular, partArray)

    ideology = ""
    ideodist = Infinity
    for (var i = 0; i < ideologies.length; i++) {
        dist = 0
        dist += Math.pow(Math.abs(ideologies[i].stats.bigt - aggression), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.diff - speciation), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.asim - integration), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.plur - diversity), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.plzn - totalitarian), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.part - particular), 2)
        dist = Math.sqrt(dist);
        if (dist < ideodist) {
            ideology = ideologies[i].name
            ideodist = dist
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology
    /*
    function createImage(src, x, y, w, h) {
        img = new Image ()
        img.src = src
        img.onLoad = function() {
            ctx.drawImage(img, x, y, w, h)
        }
    }
    */
    /*
    window.onload = function() {
        var c = document.createElement("canvas")
        var ctx = c.getContext("2d")
        c.width = 800;
        c.height = 650;
        ctx.fillStyle = "#EEEEEE"
        ctx.fillRect(0,0,800,650);

        img = document.getElementById("img-aggression")
        ctx.drawImage(img, 20, 170, 100, 100);
        img = document.getElementById("img-courtesy")
        ctx.drawImage(img, 680, 170, 100, 100)
        img = document.getElementById("img-speciation")
        ctx.drawImage(img, 20, 290, 100, 100)
        img = document.getElementById("img-uniformity")
        ctx.drawImage(img, 680, 290, 100, 100)
        img = document.getElementById("img-integration")
        ctx.drawImage(img, 20, 410, 100, 100)
        img = document.getElementById("img-segregation")
        ctx.drawImage(img, 680, 410, 100, 100)
        img = document.getElementById("img-diversity")
        ctx.drawImage(img, 20, 530, 100, 100)
        img = document.getElementById("img-supremacy")
        ctx.drawImage(img, 680, 530, 100, 100)
        img = document.getElementById("img-totalitarian")
        ctx.drawImage(img, 20, 650, 100, 100)
        img = document.getElementById("img-libertarian")
        ctx.drawImage(img, 680, 650, 100, 100)
        img = document.getElementById("img-particular")
        ctx.drawImage(img, 20, 770, 100, 100)
        img = document.getElementById("img-universal")
        ctx.drawImage(img, 680, 770, 100, 100)

        ctx.fillStyle="#222222"
        ctx.fillRect(120, 180, 560, 80)
        ctx.fillRect(120, 300, 560, 80)
        ctx.fillRect(120, 420, 560, 80)
        ctx.fillRect(120, 540, 560, 80)
        ctx.fillRect(120, 660, 560, 80)
        ctx.fillRect(120, 780, 560, 80)
        ctx.fillStyle="#ff0000ff"
        ctx.fillRect(120, 184, 5.6*aggression-2, 72)
        ctx.fillStyle="#0098ffff"
        ctx.fillRect(682-5.6*courtesy, 184, 5.6*courtesy-2, 72)
        ctx.fillStyle="#d4aa00ff"
        ctx.fillRect(120, 304, 5.6*speciation-2, 72)
        ctx.fillStyle="#6f4f85ff"
        ctx.fillRect(682-5.6*uniformity, 304, 5.6*uniformity-2, 72)
        ctx.fillStyle="#8a5a32ff"
        ctx.fillRect(120, 424, 5.6*integration-2, 72)
        ctx.fillStyle="#288c2aff"
        ctx.fillRect(682-5.6*segregation, 424, 5.6*segregation-2, 72)
        ctx.fillStyle="#bf72baff"
        ctx.fillRect(120, 544, 5.6*diversity-2, 72)
        ctx.fillStyle="#ff8809ff"
        ctx.fillRect(682-5.6*supremacy, 544, 5.6*supremacy-2, 72)
        ctx.fillStyle="#9a100aff"
        ctx.fillRect(120, 664, 5.6*totalitarian-2, 72)
        ctx.fillStyle="#ffef4bff"
        ctx.fillRect(682-5.6*libertarian, 664, 5.6*libertarian-2, 72)
        ctx.fillStyle="#ff792bff"
        ctx.fillRect(120, 784, 5.6*particular-2, 72)
        ctx.fillStyle="#3bf029ff"
        ctx.fillRect(682-5.6*universal, 784, 5.6*universal-2, 72)
        ctx.fillStyle="#222222"
        ctx.font="700 80px Montserrat"
        ctx.textAlign="left"
        ctx.fillText("RaceValues", 20, 90)
        ctx.font="50px Montserrat"
        ctx.fillText(ideology, 20, 140)

        ctx.textAlign="left"
        if (aggression  > 30) {ctx.fillText(aggression + "%", 130, 237.5)}
        if (speciation     > 30) {ctx.fillText(speciation + "%", 130, 357.5)}
        if (integration   > 30) {ctx.fillText(integration + "%", 130, 477.5)}
        if (diversity > 30) {ctx.fillText(diversity + "%", 130, 597.5)}
        if (totalitarian > 30) {ctx.fillText(totalitarian + "%", 130, 717.5)}
        if (particular > 30) {ctx.fillText(particular + "%", 130, 837.5)}
        ctx.textAlign="right"
        if (courtesy    > 30) {ctx.fillText(courtesy + "%", 670, 237.5)}
        if (uniformity     > 30) {ctx.fillText(uniformity + "%", 670, 357.5)}
        if (segregation > 30) {ctx.fillText(segregation + "%", 670, 477.5)}
        if (supremacy  > 30) {ctx.fillText(supremacy + "%", 670, 597.5)}
        if (libertarian > 30) {ctx.fillText(libertarian + "%", 670, 717.5)}
        if (universal > 30) {ctx.fillText(universal + "%", 670, 837.5)}

        ctx.font="300 30px Montserrat"
        ctx.fillText("racevalues.github.io", 780, 60)
		ctx.fillText(version, 780, 90)
        ctx.textAlign="center"
        ctx.fillText("Bigotry Axis: " + document.getElementById("bigotry-label").innerHTML, 400, 175)
        ctx.fillText("Differentialism Axis: " + document.getElementById("differentialism-label").innerHTML, 400, 295)
        ctx.fillText("Assimilationism Axis: " + document.getElementById("assimilationism-label").innerHTML, 400, 415)
        ctx.fillText("Pluralism Axis: " + document.getElementById("pluralism-label").innerHTML, 400, 535)
        ctx.fillText("Politicization Axis: " + document.getElementById("politicization-label").innerHTML, 400, 655)
        ctx.fillText("Particularism Axis: " + document.getElementById("particularism-label").innerHTML, 400, 775)

        document.getElementById("banner").src = c.toDataURL();
    }
    */
    </script>
</body>
